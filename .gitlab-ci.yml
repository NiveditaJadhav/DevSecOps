stages:
  - analyze

sonarqube_scan:
  stage: analyze
  image: sonarsource/sonar-scanner-cli:11
  script:
    - curl -u "${SONAR_TOKEN}:" "${SONAR_HOST_URL}/api/issues/gitlab_sast_export?projectKey=devopsai_1&branch=${CI_COMMIT_BRANCH}&pullRequest=${CI_MERGE_REQUEST_IID}" -o gl-sast-sonar-report.json
  variables:
    SONAR_HOST_URL: "http://host.docker.internal:9000"  # Update with your SonarQube server address
    SONAR_TOKEN: "<your_sonarqube_token>"
